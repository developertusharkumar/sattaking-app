(self.webpackChunksattaking_app=self.webpackChunksattaking_app||[]).push([[87],{87:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Tab1PageModule:()=>M});var a=n(2859),o=n(8583),l=n(665),s=n(3550),i=n(6738),r=n(7716),c=n(2468),g=n(2047);function m(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",18),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.AsE("",e.name," (",e.time,")")}}function u(e,t){if(1&e&&(r.TgZ(0,"strong",23),r._uU(1),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.hij(" ",e.currentGames.result," ")}}function d(e,t){1&e&&(r.TgZ(0,"strong",23),r._uU(1," WAIT "),r.qZA())}function p(e,t){if(1&e&&(r.TgZ(0,"ion-row"),r.TgZ(1,"ion-col",19),r.TgZ(2,"div",20),r.TgZ(3,"span",21),r._uU(4),r.qZA(),r.YNc(5,u,2,1,"strong",22),r.YNc(6,d,2,0,"strong",22),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(4),r.AsE("",e.currentGames.name," (",e.currentGames.time,")"),r.xp6(1),r.Q6J("ngIf",null==e.currentGames?null:e.currentGames.result),r.xp6(1),r.Q6J("ngIf",!(null!=e.currentGames&&e.currentGames.result))}}function h(e,t){1&e&&(r.TgZ(0,"ion-row"),r.TgZ(1,"ion-label",24),r._uU(2," No Current Game "),r.qZA(),r.qZA())}function f(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ion-list"),r.TgZ(1,"form",10),r.TgZ(2,"ion-card"),r.TgZ(3,"ion-list"),r.TgZ(4,"ion-item"),r.TgZ(5,"ion-label",11),r._uU(6,"Name"),r.qZA(),r.TgZ(7,"ion-select",12),r.YNc(8,m,2,3,"ion-select-option",13),r.qZA(),r.qZA(),r.TgZ(9,"ion-item"),r.TgZ(10,"ion-label",11),r._uU(11,"Result"),r.qZA(),r._UZ(12,"ion-input",14),r.qZA(),r.qZA(),r.TgZ(13,"ion-row"),r.TgZ(14,"ion-button",15),r.NdJ("click",function(){return r.CHM(e),r.oxw().addCurrentGame()}),r._uU(15," Update Current Game "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(16,p,7,4,"ion-row",16),r.YNc(17,h,3,0,"ng-template",null,17,r.W1O),r.qZA()}if(2&e){const e=r.MAs(18),t=r.oxw();r.xp6(1),r.Q6J("formGroup",t.gameForm),r.xp6(7),r.Q6J("ngForOf",t.allGames),r.xp6(6),r.Q6J("disabled",!t.gameForm.valid),r.xp6(2),r.Q6J("ngIf",null==t.currentGames?null:t.currentGames.name)("ngIfElse",e)}}function Z(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",18),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.Oqu(e.name)}}function T(e,t){if(1&e&&(r.TgZ(0,"ion-select-option",18),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.Oqu(e)}}function A(e,t){if(1&e&&(r.TgZ(0,"ion-item"),r.TgZ(1,"ion-label",11),r._uU(2,"Slot time"),r.qZA(),r.TgZ(3,"ion-select",28),r.YNc(4,T,2,2,"ion-select-option",13),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(4),r.Q6J("ngForOf",e.timeSlots)}}function G(e,t){1&e&&(r.TgZ(0,"ion-item"),r.TgZ(1,"ion-item"),r.TgZ(2,"ion-label",11),r._uU(3,"Result"),r.qZA(),r._UZ(4,"ion-input",14),r.qZA(),r.qZA())}function b(e,t){if(1&e&&(r.TgZ(0,"strong",23),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij(" ",e.result," ")}}function q(e,t){1&e&&(r.TgZ(0,"strong",23),r._uU(1," WAIT "),r.qZA())}function v(e,t){if(1&e&&(r.TgZ(0,"ion-col",19),r.TgZ(1,"div",20),r.TgZ(2,"span",21),r._uU(3),r.qZA(),r.TgZ(4,"span",30),r._uU(5),r.qZA(),r.YNc(6,b,2,1,"strong",22),r.YNc(7,q,2,0,"strong",22),r.qZA(),r.qZA()),2&e){const e=t.$implicit;r.xp6(3),r.Oqu(e.name),r.xp6(2),r.hij("(",e.time,")"),r.xp6(1),r.Q6J("ngIf",null==e?null:e.result),r.xp6(1),r.Q6J("ngIf",!(null!=e&&e.result))}}function x(e,t){if(1&e&&(r.TgZ(0,"ion-row"),r.YNc(1,v,8,4,"ion-col",29),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.currentGames)}}function _(e,t){1&e&&(r.TgZ(0,"ion-row"),r.TgZ(1,"ion-label",24),r._uU(2," No Current Game "),r.qZA(),r.qZA())}function C(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ion-list"),r.TgZ(1,"form",10),r.TgZ(2,"ion-card"),r.TgZ(3,"ion-list"),r.TgZ(4,"ion-item"),r.TgZ(5,"ion-label",11),r._uU(6,"Name"),r.qZA(),r.TgZ(7,"ion-select",25),r.NdJ("ionChange",function(){return r.CHM(e),r.oxw().showSlotsOfTime()}),r.YNc(8,Z,2,2,"ion-select-option",13),r.qZA(),r.qZA(),r.YNc(9,A,5,1,"ion-item",9),r.YNc(10,G,5,0,"ion-item",9),r.qZA(),r.TgZ(11,"ion-row"),r.TgZ(12,"ion-button",15),r.NdJ("click",function(){return r.CHM(e),r.oxw().addCurrentSingleGame()}),r._uU(13," Update Current Game "),r._UZ(14,"ion-icon",26),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(15,x,2,1,"ion-row",16),r.YNc(16,_,3,0,"ng-template",null,27,r.W1O),r.qZA()}if(2&e){const e=r.MAs(17),t=r.oxw();r.xp6(1),r.Q6J("formGroup",t.gameForm),r.xp6(7),r.Q6J("ngForOf",t.allGames),r.xp6(1),r.Q6J("ngIf",!0===t.showSlots),r.xp6(1),r.Q6J("ngIf",!0===t.showSlots),r.xp6(2),r.Q6J("disabled",!t.gameForm.valid),r.xp6(3),r.Q6J("ngIf",(null==t.currentGames?null:t.currentGames.length)>0)("ngIfElse",e)}}const S=[{path:"",component:(()=>{class e{constructor(e,t,n){this.dataService=e,this.fb=t,this.helperService=n,this.gameType="multiple",this.dbPath="sattaking",this.showSlots=!1,console.log("date",i().date()),console.log("year",i().year()),console.log("month",i().format("MMM")),this.dateObject={date:i().date(),month:i().format("MMM"),year:i().year()}}createForm(){"multiple"===this.gameType&&(this.gameForm=this.fb.group({name:[null,l.kI.required],result:[null,Number]})),"single"===this.gameType&&(this.gameForm=this.fb.group({name:[null,l.kI.required],time:[null,l.kI.required],result:[null,Number]}))}ngOnInit(){this.getAllGames(),this.getCurrentGame()}performActions(){const e={date:i().date(),month:i().format("MMM"),year:i().year()};i().subtract(1,"day").date(),this.dataService.getAllGames("multiple").once("value").then(t=>{console.log("result",t.val());const n=t.val(),a=t.val(),o=Object.keys(n);this.createFreshMultipleGames(o.slice(),n),this.createFreshMultipleGamesTable(o.slice(),a,e)}),this.dataService.getAllGames("single").once("value").then(t=>{console.log("result",t.val());const n=t.val(),a=Object.keys(n);this.createFreshSingleGames(a.slice(),n),this.createFreshSingleGamesTable(a.slice(),n,e)}),this.deleteCurrentMultipleGame(),console.log("previous date",i().subtract(1,"day").date())}deleteCurrentMultipleGame(){this.dataService.deleteCurrentMultipleGame().then(e=>{console.log("multiple game removed")})}createFreshMultipleGames(e,t){e.forEach(e=>{console.log("game",t[e]);const n=t[e].result;delete t[e].prevResult,delete t[e].result,t[e].prevResult=n}),console.log("fresh games for games",t),this.dataService.addGamesToGames(t,"multiple").then(e=>{console.log("successfully added the new games payload  to the multiple games",e)})}createFreshSingleGames(e,t){e.forEach(e=>{delete t[e].result}),console.log("fresh games for games",t),this.dataService.addGamesToGames(t,"single").then(e=>{console.log("successfully added the new games payload  to the single games",e)}),this.dataService.createCurrentGame(t,"single").then(e=>{console.log("successfully reset the single games",e)})}createFreshMultipleGamesTable(e,t,n){e.forEach(e=>{delete t[e].prevResult,delete t[e].result}),console.log("fresh games",t),this.dataService.addOneDayExtraToMultipleDataTable(t,"multiple",n).then(e=>{console.log("successfully added the new table to the multiple table",e)})}createFreshSingleGamesTable(e,t,n){e.forEach(e=>{delete t[e].result}),console.log("fresh games for single",t),this.dataService.addOneDayExtraToMultipleDataTable(t,"single",n).then(e=>{console.log("successfully added the new table to the single table",e)})}getCurrentGame(){this.dataService.getCurrentGame(this.gameType).on("value",e=>{if(console.log("snap shot for current game",e.val()),e.val()&&("multiple"===this.gameType&&(this.currentGames=e.val()),"single"===this.gameType)){const t=e.val();this.currentGames=Object.keys(t).map(e=>t[e])}})}getAllGames(){this.createForm(),this.dataService.getAllGames(this.gameType).on("value",e=>{this.allGames=this.dataService.extractGamesFromAllGames(e)}),console.log("get all games",this.allGames)}segmentChanged(e){console.log("event",e),this.gameType=e.detail.value,this.getAllGames(),this.getCurrentGame()}showSlotsOfTime(){const e=this.gameForm.value;console.log("form values",e),this.timeSlots=this.dataService.generateTimeWithIntervals(e.name.slot),this.timeSlots.length>0&&(this.showSlots=!0),console.log("time slots",this.timeSlots)}addCurrentGame(){const e=this.gameForm.value;e.name.result=e.result;const t=e.name;console.log("payload",t),this.gameForm.reset();const n=this.dataService.createCurrentGame(t,this.gameType);console.log("result",n),n&&(this.helperService.presentToast("Current Game Successfully Added",2e3),this.updateDataTableAndGamesData({result:e.result,name:e.name.name}),this.getCurrentGame())}addCurrentSingleGame(){const e=this.gameForm.value;e.name.result=e.result;const t=e.name;t.time=e.time,console.log("payload",t),this.gameForm.reset();const n=this.dataService.createCurrentSingleGame(t,this.gameType);console.log("result",n),n&&(this.helperService.presentToast("Current Game Successfully Added",2e3),this.updateSingleGameDataAndDataTable(t),this.getCurrentGame())}updateSingleGameDataAndDataTable(e){console.log("payload for current data upload",e),this.dataService.updateSingleDataTableAndGame(e,this.gameType,this.dateObject).then(e=>{console.log("reponse while updating the games and data table",e)}).catch(e=>{console.log("error while updating the games and data table",e)})}updateDataTableAndGamesData(e){this.dataService.updateDataTableAndGamesData(e,this.gameType,this.dateObject).then(e=>{console.log("reponse while updating the games and data table",e)}).catch(e=>{console.log("error while updating the games and data table",e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(c.D),r.Y36(l.qu),r.Y36(g.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-tab1"]],decls:20,vars:5,consts:[[3,"translucent"],["color","primary"],["slot","end"],["fill","solid","color","primary",3,"click"],[3,"fullscreen"],[3,"value","ionChange"],["value","multiple","layout","icon-start"],["name","game-controller-outline"],["value","single","layout","icon-start"],[4,"ngIf"],[1,"game-form",3,"formGroup"],["position","fixed"],["formControlName","name","placeholder","Select Game","cancelText","Dismiss"],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","Enter Result","formControlName","result"],[1,"game-button",3,"disabled","click"],[4,"ngIf","ngIfElse"],["noMultipleGame",""],[3,"value"],["size","12"],[1,"game_data"],[1,"name"],["class","result",4,"ngIf"],[1,"result"],[1,"no-data"],["formControlName","name","placeholder","Select Game","cancelText","Dismiss",3,"ionChange"],["slot","end","name","save"],["noSingleGame",""],["formControlName","time","placeholder","Select Time Slot","cancelText","Dismiss"],["size","12",4,"ngFor","ngForOf"],[1,"time"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header",0),r.TgZ(1,"ion-toolbar",1),r.TgZ(2,"ion-title"),r._uU(3," Current Game "),r.qZA(),r.TgZ(4,"ion-buttons",2),r.TgZ(5,"ion-button",3),r.NdJ("click",function(){return t.performActions()}),r._uU(6," Actions "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"ion-content",4),r.TgZ(8,"ion-toolbar"),r.TgZ(9,"ion-segment",5),r.NdJ("ionChange",function(e){return t.segmentChanged(e)}),r.TgZ(10,"ion-segment-button",6),r.TgZ(11,"ion-label"),r._uU(12,"Multiple"),r.qZA(),r._UZ(13,"ion-icon",7),r.qZA(),r.TgZ(14,"ion-segment-button",8),r.TgZ(15,"ion-label"),r._uU(16,"Single"),r.qZA(),r._UZ(17,"ion-icon",7),r.qZA(),r.qZA(),r.qZA(),r.YNc(18,f,19,5,"ion-list",9),r.YNc(19,C,18,7,"ion-list",9),r.qZA()),2&e&&(r.Q6J("translucent",!0),r.xp6(7),r.Q6J("fullscreen",!0),r.xp6(2),r.Q6J("value",t.gameType),r.xp6(9),r.Q6J("ngIf","multiple"===t.gameType),r.xp6(1),r.Q6J("ngIf","single"===t.gameType))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.YG,a.W2,a.cJ,a.QI,a.GO,a.Q$,a.gu,o.O5,a.q_,l._Y,l.JL,l.sg,a.PM,a.Ie,a.t9,l.JJ,l.u,o.sg,a.pK,a.as,a.Nd,a.n0,a.wI],styles:[".game-form[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.game-button[_ngcontent-%COMP%]{margin:10px auto}.game_data[_ngcontent-%COMP%]{text-align:center;padding:20px;margin:5px;border:1px solid #000;background-color:#030;color:#fff}.game_data[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{position:absolute;right:15px;font-size:20px;top:15px}.game_data[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .game_data[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{display:block;font-size:30px}.game_data[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{color:#ff0}.game_data[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:20px;padding:5px;display:block;color:#ff0}.game_data[_ngcontent-%COMP%]   .left-brac[_ngcontent-%COMP%], .game_data[_ngcontent-%COMP%]   .right-brac[_ngcontent-%COMP%]{color:#58facd}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[s.Bz.forChild(S)],s.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[a.Pc,o.ez,l.u5,y,l.UX]]}),e})()}}]);